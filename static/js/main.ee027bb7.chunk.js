(this.webpackJsonppixabook=this.webpackJsonppixabook||[]).push([[0],{37:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(30),r=c.n(a),i=(c(37),c(5)),l=c(22);c(52),c(53),c(39);l.a.initializeApp({apiKey:"AIzaSyBYQ-mt5kZs1dsbw6ZdK2HVbm2afmTOY-o",authDomain:"pixabook-ebe1f.firebaseapp.com",databaseURL:"https://pixabook-ebe1f-default-rtdb.firebaseio.com",projectId:"pixabook-ebe1f",storageBucket:"pixabook-ebe1f.appspot.com",messagingSenderId:"480554557124",appId:"1:480554557124:web:4b5cc542b7b3e7194df391"});var o=l.a.storage(),u=l.a.firestore(),j=l.a.firestore.FieldValue.serverTimestamp,b=l.a.auth(),d=c(2),p=s.a.createContext(),O=function(){return Object(n.useContext)(p)},x=function(e){var t=e.children,c=Object(n.useState)(),s=Object(i.a)(c,2),a=s[0],r=s[1],l=Object(n.useState)(!0),o=Object(i.a)(l,2),u=o[0],j=o[1];Object(n.useEffect)((function(){return b.onAuthStateChanged((function(e){r(e),j(!1)}))}),[]);var O={currentUser:a,login:function(e,t){return b.signInWithEmailAndPassword(e,t)},signup:function(e,t){return b.createUserWithEmailAndPassword(e,t)},logout:function(){return b.signOut()},resetPass:function(e){return b.sendPasswordResetEmail(e)},updateEmail:function(e){return a.updateEmail(e)},updatePass:function(e){return a.updatePassword(e)}};return Object(d.jsx)(p.Provider,{value:O,children:!u&&t})},f=c(12),h=c(6),m=c(21),v=c(31),g=function(e){var t=e.component,c=e.restricted,n=Object(v.a)(e,["component","restricted"]),s=O().currentUser;return Object(d.jsx)(h.b,Object(m.a)(Object(m.a)({},n),{},{render:function(e){return s&&c?Object(d.jsx)(h.a,{to:"/"}):Object(d.jsx)(t,Object(m.a)({},e))}}))},N=function(e){var t=Object(n.useState)([]),c=Object(i.a)(t,2),s=c[0],a=c[1];return Object(n.useEffect)((function(){var t=u.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id}))})),a(t)}));return function(){return t}}),[e]),{docs:s}},w=c(55);var y=function(e){var t=e.setSelectedImg,c=N("images").docs;return Object(d.jsx)("div",{className:"img-grid",children:c&&c.map((function(e){return Object(d.jsx)(w.a.div,{whileHover:{opacity:1,scale:1.07},whileTap:{scale:.9},layout:!0,className:"img-wrap",onClick:function(){return t(e.url)},children:Object(d.jsx)(w.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},e.id)}))})},k=c(10),S=c.n(k),E=c(18),I=function(e){var t=Object(n.useState)(0),c=Object(i.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(null),l=Object(i.a)(r,2),b=l[0],d=l[1],p=Object(n.useState)(null),O=Object(i.a)(p,2),x=O[0],f=O[1];return Object(n.useEffect)((function(){var t=o.ref(e.name),c=u.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;a(t)}),(function(e){console.log("Error in putting file abd percentage."),d(e)}),Object(E.a)(S.a.mark((function e(){var n,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return n=e.sent,s=j(),e.next=6,c.add({url:n,createdAt:s});case 6:f(n);case 7:case"end":return e.stop()}}),e)}))))}),[e]),{progress:s,url:x,error:b}},C=function(e){var t=e.file,c=e.setFile,s=I(t),a=s.url,r=s.progress;return Object(n.useEffect)((function(){a&&c(null)}),[a,c]),Object(d.jsx)(w.a.div,{className:"progress-bar",initial:{width:0},animate:{width:r+"%"}})},P=function(e){var t=e.currentUser,c=Object(n.useState)(null),s=Object(i.a)(c,2),a=s[0],r=s[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),u=o[0],j=o[1],b=Object(h.g)().push,p=["image/png","image/jpeg"];return Object(d.jsxs)("form",{className:"upload-form",children:[t?Object(d.jsxs)("label",{className:"upload-label",children:[Object(d.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&p.includes(t.type)?(r(t),j("")):(r(null),j("Please select an image files (png/jpeg)"))}}),Object(d.jsx)("span",{children:"+"})]}):Object(d.jsx)("button",{className:"btn login-btn",onClick:function(){return b("./login")},children:"Login to upload"}),Object(d.jsxs)("div",{className:"output",children:[u&&Object(d.jsx)("div",{className:"error",children:u}),a&&Object(d.jsx)("div",{children:a.name}),a&&Object(d.jsx)(C,{file:a,setFile:r})]})]})};var L=function(e){var t=e.selectedImg,c=e.setSelectedImg;return Object(d.jsx)(w.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&c(null)},initial:{opacity:0},animate:{opacity:1},children:Object(d.jsx)(w.a.img,{src:t,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}})})},H=function(){var e=O(),t=e.currentUser,c=e.logout,n=Object(h.g)().push,s=function(){var e=Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c();case 3:h.g.pushState("./login"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error in logging out");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("nav",{className:"nav-bar",children:[Object(d.jsx)("h1",{children:"PIXABOOK"}),t?Object(d.jsx)("button",{className:"btn nav-link",onClick:s,children:"Log-out"}):Object(d.jsx)("button",{className:"btn nav-link",onClick:function(){return n("./login")},children:"Login"})]})},D=function(){var e=O().currentUser,t=Object(n.useState)(null),c=Object(i.a)(t,2),s=c[0],a=c[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(H,{}),Object(d.jsx)(P,{currentUser:e}),Object(d.jsx)(y,{setSelectedImg:a}),s&&Object(d.jsx)(L,{selectedImg:s,setSelectedImg:a})]})},A=(c(50),function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=O().login,s=Object(n.useState)(""),a=Object(i.a)(s,2),r=a[0],l=a[1],o=Object(n.useState)(!1),u=Object(i.a)(o,2),j=u[0],b=u[1],p=Object(h.g)(),x=function(){var n=Object(E.a)(S.a.mark((function n(s){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.preventDefault(),n.prev=1,l(""),b(!0),n.next=6,c(e.current.value,t.current.value);case 6:console.log("Login sucess"),p.push("/"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),l("Wrong Password");case 13:b(!1);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}();return Object(d.jsx)(w.a.div,{className:"backdrop",initial:{opacity:0},animate:{opacity:1},children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:"Login Form"}),r,Object(d.jsxs)("form",{onSubmit:x,children:[Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("input",{type:"text",ref:e,required:!0}),Object(d.jsx)("label",{children:"Email"})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("input",{className:"pswrd",type:"password",ref:t,required:!0}),Object(d.jsx)("span",{className:"show",onClick:function(e){e.preventDefault(),"password"===t.current.type?(t.current.type="text",e.target.style.color="#1DA1F2",e.target.innerHTML="HIDE"):(t.current.type="password",e.target.innerHTML="SHOW",e.target.style.color="#111")},children:"SHOW"}),Object(d.jsx)("label",{children:"Password"})]}),Object(d.jsxs)("div",{className:"button",children:[Object(d.jsx)("div",{className:"inner"}),Object(d.jsx)("button",{disabled:j,type:"submit",children:"LOGIN"})]})]}),Object(d.jsxs)("div",{className:"signup",children:["Forgot Password? ",Object(d.jsx)(f.b,{to:"/reset-pass",children:"Reset"})]}),Object(d.jsx)("div",{className:"auth",children:"Or login with"}),Object(d.jsx)("div",{className:"links",children:Object(d.jsx)("div",{onClick:function(c){c.preventDefault(),e.current.value="tminus5@test.com",t.current.value="password"},className:"facebook",children:Object(d.jsx)("i",{className:"fab fa-facebook-square",children:Object(d.jsx)("span",{children:"DEMO"})})})}),Object(d.jsxs)("div",{className:"signup",children:["Need an account? ",Object(d.jsx)(f.b,{to:"/signup",children:"Sign Up"})]})]})})}),R=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useRef)(),s=O().signup,a=Object(n.useState)(""),r=Object(i.a)(a,2),l=r[0],o=r[1],u=Object(n.useState)(!1),j=Object(i.a)(u,2),b=j[0],p=j[1],x=Object(h.g)(),m=function(){var n=Object(E.a)(S.a.mark((function n(a){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),t.current.value===c.current.value){n.next=3;break}return n.abrupt("return",o("Password dosent match"));case 3:return n.prev=3,o(""),p(!0),n.next=8,s(e.current.value,t.current.value);case 8:x.push("/login"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),o("Failed to create an account");case 14:p(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),v=function(e){e.preventDefault(),"password"===t.current.type?(t.current.type="text",e.target.style.color="#1DA1F2",e.target.innerHTML="HIDE"):(t.current.type="password",e.target.innerHTML="SHOW",e.target.style.color="#111")};return Object(d.jsx)(w.a.div,{className:"backdrop",initial:{opacity:0},animate:{opacity:1},children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:"Sign Up"}),l&&{error:l},Object(d.jsxs)("form",{onSubmit:m,children:[Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("input",{type:"text",ref:e,required:!0}),Object(d.jsx)("label",{children:"Email"})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("input",{className:"pswrd",type:"password",ref:t,required:!0}),Object(d.jsx)("span",{className:"show",onClick:v,children:"SHOW"}),Object(d.jsx)("label",{children:"Password"})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("input",{className:"pswrd",type:"password",ref:c,required:!0}),Object(d.jsx)("span",{className:"show",onClick:v,children:"SHOW"}),Object(d.jsx)("label",{children:"Confirm Password"})]}),Object(d.jsxs)("div",{className:"button",children:[Object(d.jsx)("div",{className:"inner"}),Object(d.jsx)("button",{disabled:b,type:"submit",children:"Register"})]})]}),Object(d.jsx)("div",{className:"auth",children:"Or sign up with"}),Object(d.jsx)("div",{className:"links",children:Object(d.jsx)("div",{className:"google",children:Object(d.jsx)("i",{className:"fab fa-google-plus-square",children:Object(d.jsx)("span",{children:"Google"})})})}),Object(d.jsxs)("div",{className:"signup",children:["Have an account? ",Object(d.jsx)(f.b,{to:"/login",children:"Log In"})]})]})})},U=function(){var e=Object(n.useRef)(),t=O().resetPass,c=Object(n.useState)(""),s=Object(i.a)(c,2),a=s[0],r=s[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),u=o[0],j=o[1],b=Object(n.useState)(""),p=Object(i.a)(b,2),x=p[0],h=p[1],m=function(){var c=Object(E.a)(S.a.mark((function c(n){return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,h(""),r(""),j(!0),c.next=7,t(e.current.value);case 7:h("Check your inbox for futher instructions"),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),r("Failed to reset password");case 13:j(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})));return function(e){return c.apply(this,arguments)}}();return Object(d.jsx)(w.a.div,{className:"backdrop",initial:{opacity:0},animate:{opacity:1},children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{children:"Login Form"}),x&&{message:x},a&&{error:a},Object(d.jsxs)("form",{onSubmit:m,children:[Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("input",{type:"text",ref:e,required:!0}),Object(d.jsx)("label",{children:"Email"})]}),Object(d.jsxs)("div",{className:"button",children:[Object(d.jsx)("div",{className:"inner"}),Object(d.jsx)("button",{disabled:u,type:"submit",children:"Reset"})]})]}),Object(d.jsx)(f.b,{to:"/login",children:Object(d.jsx)("div",{className:"links",children:Object(d.jsx)("div",{className:"google",children:Object(d.jsx)("i",{className:"fab fa-google-plus-square",children:Object(d.jsx)("span",{children:"Cancel"})})})})}),Object(d.jsxs)("div",{className:"signup",children:["Need an account? ",Object(d.jsx)(f.b,{to:"/signup",children:"Sign Up"})]})]})})},F=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2);t[0],t[1];return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(f.a,{children:Object(d.jsx)(x,{children:Object(d.jsxs)(h.d,{children:[Object(d.jsx)(g,{exact:!0,path:"/",component:D,restricted:!1}),Object(d.jsx)(g,{exact:!0,path:"/signup",component:R,restricted:!0}),Object(d.jsx)(g,{exact:!0,path:"/login",component:A,restricted:!0}),Object(d.jsx)(g,{exact:!0,path:"/reset-pass",component:U,restricted:!0})]})})})})};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(F,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.ee027bb7.chunk.js.map